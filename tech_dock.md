Обновленный пакет технической документации1. Функциональные требования: Модуль «Визуальное расписание»В дополнение к канбан-доске в интерфейс менеджера интегрируется интерактивный календарь.Режим «День» (Почасовая шкала):Отображение всех записей на текущую дату с разбивкой по часам.Возможность видеть «окна» (свободные слоты) для быстрой записи клиентов по телефону.Визуальное выделение длительности услуги (например, «Шиномонтаж» — 1 час, «Капиталка ДВС» — 8 часов).Режим «Неделя / Месяц»:Оценка общей загруженности СТО на ближайший период.Планирование крупных работ и распределение нагрузки между мастерами.Режим «Год»:Архивный и стратегический вид для анализа сезонности (например, пики в сезон смены резины).Drag-and-Drop между режимами:Перетаскивание записи в календаре автоматически меняет время визита в базе данных и отправляет уведомление клиенту в Telegram.2. Техническая архитектура и синхронизация (Data Flow)Календарь и канбан-доска являются двумя разными представлениями (Views) одной и той же базы данных.Единый источник истины (Single Source of Truth): Все изменения в календаре (смена даты/времени) или в канбане (смена статуса) записываются в таблицу appointments в PostgreSQL.Мгновенное обновление: При изменении времени записи в календаре статус карточки в канбане может автоматически меняться (например, если время записи наступило «сейчас», карточка может подсветиться как «Ожидается»).Интеграция с ботом: Выбранные клиентом в Telegram-боте дата и время мгновенно резервируют слот в календарной сетке, исключая риск двойной записи (overbooking).3. Оценка рисков и архитектурные решенияРискВлияниеРешение архитектораПерегруз интерфейсаВысокоеПереключатель (Toggle) между видом «Канбан» и «Календарь». Менеджер видит только один экран за раз, чтобы не путаться.Конфликты времениСреднееВалидация на стороне бэкенда (FastAPI): система не даст перетащить запись в календаре на уже занятый слот.Сложность управления на малых экранахСреднееДля мобильной версии (смартфонов) календарь превращается в «Список дня» (Agenda), так как сетку на месяц неудобно смотреть с телефона.4. План реализации (Дополнение)Интеграция сложного календарного интерфейса добавляет к срокам разработки 2–3 рабочих дня.Этап 2.1: Разработка логики временных слотов (Slot Manager) на бэкенде.Этап 3.1: Интеграция библиотеки FullCalendar (или аналога) во фронтенд и настройка синхронизации с канбаном.